!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","lodash","angular","angular-material","stratus.services.registry","stratus.services.model","stratus.services.collection"],factory):factory(root.Stratus,root._,root.angular)}(this,(function(Stratus,_,angular){const min=Stratus.Environment.get("production")?".min":"";Stratus.Components.Base={transclude:{model:"?stratusBaseModel"},bindings:{elementId:"@",ngModel:"=",property:"@",target:"@",id:"@",manifest:"@",decouple:"@",direct:"@",api:"@",urlRoot:"@",limit:"@",options:"<"},controller:function($scope,$attrs,Registry,Model,Collection){this.uid=_.uniqueId(_.camelToSnake("base")+"_"),Stratus.Instances[this.uid]=$scope,$scope.elementId=$attrs.elementId||this.uid,Stratus.Internals.CssLoader(Stratus.BaseUrl+Stratus.BundlePath+"components/base"+min+".css"),$scope.initialized=!1,$scope.property=$attrs.property||null,$scope.data=null,$scope.model=null,$scope.collection=null,$attrs.target&&Registry.fetch($attrs,$scope),$scope.$watch("$ctrl.ngModel",(function(data){data instanceof Model&&data!==$scope.model?$scope.model=data:data instanceof Collection&&data!==$scope.collection&&($scope.collection=data)})),$scope.initialize=function(){$scope.initialized||($scope.model&&($scope.initialized=!0,$scope.model.on("change",(function(){console.log("model changed:",arguments)}))),$scope.collection&&($scope.initialized=!0,console.log("collection available")))},$scope.$watch("$scope.model.completed",(function(newVal,oldVal){newVal&&!_.isEqual(newVal,oldVal)&&$scope.initialize()})),$scope.$watch("$scope.collection.completed",(function(newVal,oldVal){newVal&&!_.isEqual(newVal,oldVal)&&$scope.initialize()})),Stratus.Environment.get("production")||console.log("base","component:",$scope,$attrs)},templateUrl:Stratus.BaseUrl+Stratus.BundlePath+"components/base"+min+".html"}}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJTdHJhdHVzIiwiXyIsImFuZ3VsYXIiLCJ0aGlzIiwibWluIiwiRW52aXJvbm1lbnQiLCJnZXQiLCJDb21wb25lbnRzIiwiQmFzZSIsInRyYW5zY2x1ZGUiLCJtb2RlbCIsImJpbmRpbmdzIiwiZWxlbWVudElkIiwibmdNb2RlbCIsInByb3BlcnR5IiwidGFyZ2V0IiwiaWQiLCJtYW5pZmVzdCIsImRlY291cGxlIiwiZGlyZWN0IiwiYXBpIiwidXJsUm9vdCIsImxpbWl0Iiwib3B0aW9ucyIsImNvbnRyb2xsZXIiLCIkc2NvcGUiLCIkYXR0cnMiLCJSZWdpc3RyeSIsIk1vZGVsIiwiQ29sbGVjdGlvbiIsInVpZCIsInVuaXF1ZUlkIiwiY2FtZWxUb1NuYWtlIiwiSW5zdGFuY2VzIiwiSW50ZXJuYWxzIiwiQ3NzTG9hZGVyIiwiQmFzZVVybCIsIkJ1bmRsZVBhdGgiLCJpbml0aWFsaXplZCIsImRhdGEiLCJjb2xsZWN0aW9uIiwiZmV0Y2giLCIkd2F0Y2giLCJpbml0aWFsaXplIiwib24iLCJjb25zb2xlIiwibG9nIiwiYXJndW1lbnRzIiwibmV3VmFsIiwib2xkVmFsIiwiaXNFcXVhbCIsInRlbXBsYXRlVXJsIl0sIm1hcHBpbmdzIjoiQ0FNQSxTQUFXQSxLQUFNQyxTQUVPLG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDekNELE9BQU8sQ0FBQyxVQUFXLFNBQVUsVUFDN0IsbUJBQ0EsNEJBQTZCLHlCQUEwQiwrQkFBZ0NELFNBR3ZGQSxRQUFRRCxLQUFLSSxRQUFTSixLQUFLSyxFQUFHTCxLQUFLTSxTQVJ2QyxDQWFHQyxNQUFNLFNBQVVILFFBQVNDLEVBQUdDLFNBRTdCLE1BQU1FLElBQU1KLFFBQVFLLFlBQVlDLElBQUksY0FBZ0IsT0FBUyxHQUk3RE4sUUFBUU8sV0FBV0MsS0FBTyxDQUl4QkMsV0FBWSxDQUdWQyxNQUFPLHFCQUtUQyxTQUFVLENBRVJDLFVBQVcsSUFFWEMsUUFBUyxJQUNUQyxTQUFVLElBRVZDLE9BQVEsSUFDUkMsR0FBSSxJQUNKQyxTQUFVLElBQ1ZDLFNBQVUsSUFDVkMsT0FBUSxJQUNSQyxJQUFLLElBQ0xDLFFBQVMsSUFFVEMsTUFBTyxJQUVQQyxRQUFTLEtBRVhDLFdBQVksU0FBVUMsT0FBUUMsT0FBUUMsU0FBVUMsTUFBT0MsWUFFdkMxQixLQUNSMkIsSUFBTTdCLEVBQUU4QixTQUFTOUIsRUFBRStCLGFBckNoQixRQXFDcUMsS0FDOUNoQyxRQUFRaUMsVUFGTTlCLEtBRVUyQixLQUFPTCxPQUMvQkEsT0FBT2IsVUFBWWMsT0FBT2QsV0FIWlQsS0FHK0IyQixJQUM3QzlCLFFBQVFrQyxVQUFVQyxVQUFVbkMsUUFBUW9DLFFBQVVwQyxRQUFRcUMsV0F2Q3hDLGtCQXVDOEVqQyxJQUFNLFFBQ2xHcUIsT0FBT2EsYUFBYyxFQUVyQmIsT0FBT1gsU0FBV1ksT0FBT1osVUFBWSxLQUVyQ1csT0FBT2MsS0FBTyxLQUNkZCxPQUFPZixNQUFRLEtBQ2ZlLE9BQU9lLFdBQWEsS0FFaEJkLE9BQU9YLFFBQ1RZLFNBQVNjLE1BQU1mLE9BQVFELFFBSXpCQSxPQUFPaUIsT0FBTyxpQkFBaUIsU0FBVUgsTUFDbkNBLGdCQUFnQlgsT0FBU1csT0FBU2QsT0FBT2YsTUFDM0NlLE9BQU9mLE1BQVE2QixLQUNOQSxnQkFBZ0JWLFlBQWNVLE9BQVNkLE9BQU9lLGFBQ3ZEZixPQUFPZSxXQUFhRCxTQUl4QmQsT0FBT2tCLFdBQWEsV0FDZGxCLE9BQU9hLGNBSVBiLE9BQU9mLFFBQ1RlLE9BQU9hLGFBQWMsRUFDckJiLE9BQU9mLE1BQU1rQyxHQUFHLFVBQVUsV0FDeEJDLFFBQVFDLElBQUksaUJBQWtCQyxlQUk5QnRCLE9BQU9lLGFBQ1RmLE9BQU9hLGFBQWMsRUFDckJPLFFBQVFDLElBQUksMkJBS2hCckIsT0FBT2lCLE9BQU8sMEJBQTBCLFNBQVVNLE9BQVFDLFFBQ25ERCxTQUFVL0MsRUFBRWlELFFBQVFGLE9BQVFDLFNBSWpDeEIsT0FBT2tCLGdCQUdUbEIsT0FBT2lCLE9BQU8sK0JBQStCLFNBQVVNLE9BQVFDLFFBQ3hERCxTQUFVL0MsRUFBRWlELFFBQVFGLE9BQVFDLFNBSWpDeEIsT0FBT2tCLGdCQUdKM0MsUUFBUUssWUFBWUMsSUFBSSxlQUMzQnVDLFFBQVFDLElBbEdELE9Ba0dXLGFBQWNyQixPQUFRQyxTQUk1Q3lCLFlBQWFuRCxRQUFRb0MsUUFBVXBDLFFBQVFxQyxXQXJHdkIsa0JBcUc2RGpDLElBQU0ifQ==