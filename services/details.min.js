!function(t,e){"function"==typeof define&&define.amd?define(["stratus","lodash","angular","stratus.services.model"],e):e(t.Stratus,t._,t.angular)}(this,(function(t,e,i){t.Services.Details=["$provide",function(t){t.factory("details",["$http","Model","$interpolate",function(t,n,s){return class{constructor(){this.fetch=this.fetch.bind(this),this.build=this.build.bind(this)}fetch(t,n){const a=this;return new Promise((function(r,o){i.isString(t)&&(t={target:t});const c={selectedId:t.attr?t.attr("data-selectedId"):t.selectedId,property:t.attr?t.attr("data-property"):t.property};let d=0;n.$watch((function(){return d}),(function(t){e.isNumber(t)&&parseInt(t)===e.size(c)&&r(a.build(c,n))})),e.each(c,(function(t,e){if(t&&i.isString(t)){const a=s(t,!1,null,!0),r=a(n.$parent);i.isDefined(r)?(c[e]=r,d++):n.$watch((function(){return a(n.$parent)}),(function(t){t&&(c[e]=t,d++)}))}else d++}))}))}build(e,n){if(e.selectedId){let s;"version.layout"===e.property&&(s="/Api/Layout/"+e.selectedId),"version.template"===e.property&&(s="/Api/Template/"+e.selectedId),t({method:"GET",url:s,headers:{}}).then((function(t){200===t.status&&i.isObject(t.data)&&(n.convoyDetails=t.data.payload||t.data,n.selectedName=n.convoyDetails.name,n.selectedDesc=n.convoyDetails.description)}))}}}}])}]}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJTdHJhdHVzIiwiXyIsImFuZ3VsYXIiLCJ0aGlzIiwiU2VydmljZXMiLCJEZXRhaWxzIiwiJHByb3ZpZGUiLCIkaHR0cCIsIk1vZGVsIiwiJGludGVycG9sYXRlIiwiW29iamVjdCBPYmplY3RdIiwiZmV0Y2giLCJiaW5kIiwiYnVpbGQiLCIkZWxlbWVudCIsIiRzY29wZSIsInRoYXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImlzU3RyaW5nIiwidGFyZ2V0Iiwib3B0aW9ucyIsInNlbGVjdGVkSWQiLCJhdHRyIiwicHJvcGVydHkiLCJjb21wbGV0ZWQiLCIkd2F0Y2giLCJpdGVyYXRpb24iLCJpc051bWJlciIsInBhcnNlSW50Iiwic2l6ZSIsImVhY2giLCJlbGVtZW50Iiwia2V5IiwiaW50ZXJwcmV0ZXIiLCJpbml0aWFsIiwiJHBhcmVudCIsImlzRGVmaW5lZCIsInZhbHVlIiwidGFyZ2V0VXJsIiwibWV0aG9kIiwidXJsIiwiaGVhZGVycyIsInRoZW4iLCJyZXNwb25zZSIsInN0YXR1cyIsImlzT2JqZWN0IiwiZGF0YSIsImNvbnZveURldGFpbHMiLCJwYXlsb2FkIiwic2VsZWN0ZWROYW1lIiwibmFtZSIsInNlbGVjdGVkRGVzYyIsImRlc2NyaXB0aW9uIl0sIm1hcHBpbmdzIjoiQ0FLQSxTQUFXQSxFQUFNQyxHQUNPLG1CQUFYQyxRQUF5QkEsT0FBT0MsSUFDekNELE9BQU8sQ0FBQyxVQUFXLFNBQVUsVUFBVywwQkFBMkJELEdBRW5FQSxFQUFRRCxFQUFLSSxRQUFTSixFQUFLSyxFQUFHTCxFQUFLTSxTQUp2QyxDQU1HQyxNQUFNLFNBQVVILEVBQVNDLEVBQUdDLEdBQzdCRixFQUFRSSxTQUFTQyxRQUFVLENBQUMsV0FBWSxTQUFVQyxHQUNoREEsRUFBU1QsUUFBUSxVQUFXLENBQUMsUUFBUyxRQUFTLGVBQWdCLFNBQVVVLEVBQU9DLEVBQU9DLEdBQ3JGLE9BQU8sTUFDTEMsY0FFRVAsS0FBS1EsTUFBUVIsS0FBS1EsTUFBTUMsS0FBS1QsTUFDN0JBLEtBQUtVLE1BQVFWLEtBQUtVLE1BQU1ELEtBQUtULE1BRy9CTyxNQUFNSSxFQUFVQyxHQUNkLE1BQU1DLEVBQU9iLEtBQ2IsT0FBTyxJQUFJYyxTQUFRLFNBQVVDLEVBQVNDLEdBQ2hDakIsRUFBUWtCLFNBQVNOLEtBQ25CQSxFQUFXLENBQ1RPLE9BQVFQLElBSVosTUFBTVEsRUFBVSxDQUNkQyxXQUFZVCxFQUFTVSxLQUFPVixFQUFTVSxLQUFLLG1CQUFxQlYsRUFBU1MsV0FDeEVFLFNBQVVYLEVBQVNVLEtBQU9WLEVBQVNVLEtBQUssaUJBQW1CVixFQUFTVyxVQUV0RSxJQUFJQyxFQUFZLEVBQ2hCWCxFQUFPWSxRQUFPLFdBQ1osT0FBT0QsS0FDTixTQUFVRSxHQUNQM0IsRUFBRTRCLFNBQVNELElBQWNFLFNBQVNGLEtBQWUzQixFQUFFOEIsS0FBS1QsSUFDMURKLEVBQVFGLEVBQUtILE1BQU1TLEVBQVNQLE9BSWhDZCxFQUFFK0IsS0FBS1YsR0FBUyxTQUFVVyxFQUFTQyxHQUNqQyxHQUFJRCxHQUFXL0IsRUFBUWtCLFNBQVNhLEdBQVUsQ0FDeEMsTUFBTUUsRUFBYzFCLEVBQWF3QixHQUFTLEVBQU8sTUFBTSxHQUNqREcsRUFBVUQsRUFBWXBCLEVBQU9zQixTQUUvQm5DLEVBQVFvQyxVQUFVRixJQUNwQmQsRUFBUVksR0FBT0UsRUFDZlYsS0FFQVgsRUFBT1ksUUFBTyxXQUNaLE9BQU9RLEVBQVlwQixFQUFPc0IsWUFDekIsU0FBVUUsR0FDUEEsSUFDRmpCLEVBQVFZLEdBQU9LLEVBQ2ZiLGFBS05BLFVBTVJoQixNQUFNWSxFQUFTUCxHQUNiLEdBQUlPLEVBQVFDLFdBQVksQ0FDdEIsSUFBSWlCLEVBRXFCLG1CQUFyQmxCLEVBQVFHLFdBQ1ZlLEVBQVksZUFBaUJsQixFQUFRQyxZQUdkLHFCQUFyQkQsRUFBUUcsV0FDVmUsRUFBWSxpQkFBbUJsQixFQUFRQyxZQVN6Q2hCLEVBTGtCLENBQ2hCa0MsT0FGYSxNQUdiQyxJQUFLRixFQUNMRyxRQUFTLEtBRU1DLE1BQUssU0FBVUMsR0FDTixNQUFwQkEsRUFBU0MsUUFBa0I1QyxFQUFRNkMsU0FBU0YsRUFBU0csUUFDdkRqQyxFQUFPa0MsY0FBZ0JKLEVBQVNHLEtBQUtFLFNBQVdMLEVBQVNHLEtBQ3pEakMsRUFBT29DLGFBQWVwQyxFQUFPa0MsY0FBY0csS0FDM0NyQyxFQUFPc0MsYUFBZXRDLEVBQU9rQyxjQUFjSyJ9