!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","lodash","angular","stratus.services.model"],factory):factory(root.Stratus,root._,root.angular)}(this,function(Stratus,_,angular){const min=Stratus.Environment.get("production")?".min":"";Stratus.Components.PropertyDetailsSubSection={bindings:{ngModel:"=",items:"@",sectionName:"@",className:"@"},controller:["$scope","$attrs","Model",function($scope,$attrs,Model){$scope.className=$attrs.className||"sub-detail-section",$scope.sectionName=$attrs.sectionName||"",$scope.items=$attrs.items&&_.isJSON($attrs.items)?JSON.parse($attrs.items):[],$scope.visibleFields=!1,$scope.model=null,$scope.sectionName.startsWith("{")&&($scope.stopWatchingSectionName=$scope.$watch("$ctrl.sectionName",function(data){$scope.sectionName=data,$scope.stopWatchingSectionName()})),0===$scope.items.length&&($scope.stopWatchingItems=$scope.$watch("$ctrl.items",function(data){0===$scope.items.length&&($scope.items=data&&_.isJSON(data)?JSON.parse(data):[],$scope.convertItemsToObject()),$scope.stopWatchingItems()})),$scope.stopWatchingModel=$scope.$watch("$ctrl.ngModel",function(data){data instanceof Model&&data!==$scope.model&&($scope.model=data,Object.keys($scope.items).forEach(function(item){Object.prototype.hasOwnProperty.call($scope.model.data, item)&&0!==$scope.model.data[item]&&""!==$scope.model.data[item]&&($scope.visibleFields=!0)}),$scope.stopWatchingModel())}),this.$onInit=function(){$scope.convertItemsToObject()},$scope.convertItemsToObject=function(){Object.keys($scope.items).forEach(function(item){"string"==typeof $scope.items[item]&&($scope.items[item]={name:$scope.items[item]})})},$scope.typeOf=function(item){return _.isArray(item)?"array":typeof item},$scope.isArray=function(item){return _.isArray(item)}}],templateUrl:Stratus.BaseUrl+"content/property/stratus/components/propertyDetailsSubSection"+min+".html"}});
