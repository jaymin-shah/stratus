<!-- Intended for search.component -->
<div id="{{elementId}}" class="search-mini" data-layout-padding data-layout="column" data-layout-align="center stretch" data-ng-cloak>
	<div class="search-row">
		<div class="search-input">
			<md-input-container class="md-block minimal">
				<label>City</label>
				<input data-ng-model="options.query.City" type="text" maxlength="250"
				       autocomplete="off"
				>
			</md-input-container>
		</div>
	</div>

	<div data-layout="column" data-layout-align="space-around center">

		<div class="toggle-switch" data-layout="row" data-layout-align="center center">
			<div class="option-choice" data-ng-class="{inactive: options.forRent}" data-flex>
				Buy
			</div>

			<md-switch
					data-ng-model="options.forRent"
					data-ng-change="selectDefaultListingType()"
					aria-label="Buy or Rent"
					data-flex>
			</md-switch>
			<div class="option-choice" data-ng-class="{inactive: !options.forRent}" data-flex>
				Rent
			</div>
		</div>

		<div data-layout="row" data-ng-show="!options.forRent" data-layout-align="space-around center">
			<md-button class="md-raised"
			           data-ng-class="{'md-primary': inArray('Active', options.query.Status)}"
			           data-ng-click="options.query.Status = ['Active', 'Contract'];"
			           aria-label="For Sale"
			           data-md-prevent-menu-close
			>
				For Sale
			</md-button>
			<md-button class="md-raised"
			           data-ng-class="{'md-primary': inArray('Closed', options.query.Status)}"
			           data-ng-click="options.query.Status = ['Closed']"
			           aria-label="Sold"
			           data-md-prevent-menu-close
			>
				Sold
			</md-button>
		</div>

		<p data-ng-show="!options.forRent && inArray('Active', options.query.Status)">
			<md-checkbox
					data-ng-checked="inArray('Contract', options.query.Status)"
					data-ng-click="toggleArrayElement('Contract', options.query.Status)"
					aria-label="Under Contract"
					data-md-prevent-menu-close
			>
				Show Under Contract
			</md-checkbox>
		</p>

		<div data-layout="row" data-layout-align="space-around center">
			<div class="search-input" data-flex>
				<md-input-container class="md-block minimal">
					<label>Min Price</label>
					<input data-ng-model="options.query.ListPriceMin" type="text" maxlength="11" size="8" autocomplete="off">
				</md-input-container>
			</div>
			<div class="search-input" data-flex>
				<md-input-container class="md-block minimal">
					<label>Max Price</label>
					<input data-ng-model="options.query.ListPriceMax" type="text" maxlength="11" size="8" autocomplete="off">
				</md-input-container>
			</div>
		</div>

		<div data-layout="row" data-layout-align="space-around center">
			<div class="search-input">
				<md-input-container class="md-block minimal">
					<label>Beds</label>
					<md-select data-ng-model="options.query.BedroomsTotalMin">
						<md-option></md-option>
						<md-option data-ng-repeat="option in options.selection.BedroomsTotalMin" data-ng-value="option.value">
							{{option.name}}
						</md-option>
					</md-select>
				</md-input-container>
			</div>
			<div class="search-input">
				<md-input-container class="md-block minimal">
					<label>Baths</label>
					<md-select data-ng-model="options.query.BathroomsFullMin">
						<md-option></md-option>
						<md-option data-ng-repeat="option in options.selection.BathroomsFullMin" data-ng-value="option.value">
							{{option.name}}
						</md-option>
					</md-select>
				</md-input-container>
			</div>
		</div>

		<md-input-container class="md-block minimal">
			<label>Sort</label>
			<md-select data-ng-model="options.query.Order">
				<md-option data-ng-repeat="option in options.selection.Order" data-ng-value="option.value">
					{{option.name}}
				</md-option>
			</md-select>
		</md-input-container>

		<div data-layout="row" data-layout-align="space-around center">
			<md-button
					data-ng-class="{'md-primary': options.selection.ListingType.group.Residential}"
					data-ng-click="selectDefaultListingType('Residential')"
					aria-label="Residential"
					data-md-prevent-menu-close
			>
				Residential
			</md-button>
			<md-button
					data-ng-class="{'md-primary': options.selection.ListingType.group.Commercial}"
					data-ng-click="selectDefaultListingType('Commercial')"
					aria-label="Commercial"
					data-md-prevent-menu-close
			>
				Commercial
			</md-button>
		</div>

		<div data-layout="row" data-layout-align="center center" data-layout-wrap>
			<md-button
					data-ng-repeat="listType in ::options.selection.ListingType.All"
					class="md-raised"
					data-ng-show="options.forRent === listType.lease && options.selection.ListingType.group[listType.group]"
					data-ng-class="{'md-primary': inArray(listType.value, options.query.ListingType)}"
					data-ng-click="toggleArrayElement(listType.value, options.query.ListingType)"
					aria-label="{{::listType.name}}"
					data-md-prevent-menu-close
					data-ng-bind="::listType.name"
			></md-button>
		</div>

		<div data-layout="row" data-layout-align="space-around center">
			<!-- TODO, later this will allow an agent lookup -->
			<md-chips
					data-ng-model="options.query.AgentLicense"
					data-md-enable-chip-edit="true"
					data-md-add-on-blur="true"
					data-md-separator-keys="[$mdConstant.KEY_CODE.ENTER, $mdConstant.KEY_CODE.COMMA]"
					data-placeholder="Agent License"
					data-secondary-placeholder="+License"
					data-delete-button-label="Remove License"
					data-delete-hint="Press delete to remove License"
			></md-chips>
		</div>
	</div>
</div>
