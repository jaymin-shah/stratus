!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","lodash","angular","redactor"],factory):factory(root.Stratus,root._,root.angular)}(this,(function(Stratus,_,angular){const redactorOptions={};angular.module("angular-redactor",[]).constant("redactorOptions",redactorOptions).directive("redactor",["$timeout",function($timeout){return _.forEach([Stratus.BaseUrl+"sitetheorycore/dist/redactor/redactor.css",Stratus.BaseUrl+"sitetheorycore/dist/redactor/redactor-clips.css",Stratus.BaseUrl+Stratus.BundlePath+"node_modules/codemirror/lib/codemirror.css"],(function(url){Stratus.Internals.CssLoader(url)})),{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModel){scope.redactorLoaded=!1;const updateModel=function(value){$timeout((function(){scope.$apply((function(){ngModel.$setViewValue(value)}))}))},options={changeCallback:updateModel},additionalOptions=attrs.redactor?scope.$eval(attrs.redactor):{};let editor;angular.extend(options,redactorOptions,additionalOptions);const changeCallback=additionalOptions.changeCallback||redactorOptions.changeCallback;changeCallback&&(options.changeCallback=function(value){updateModel.call(this,value),changeCallback.call(this,value)}),$timeout((function(){editor=element.redactor(options),ngModel.$render(),element.on("remove",(function(){element.off("remove"),element.redactor("core.destroy")}))})),ngModel.$render=function(){angular.isDefined(editor)&&$timeout((function(){element.redactor("code.set",ngModel.$viewValue||""),element.redactor("placeholder.toggle"),scope.redactorLoaded=!0}))}}}}])}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJTdHJhdHVzIiwiXyIsImFuZ3VsYXIiLCJ0aGlzIiwicmVkYWN0b3JPcHRpb25zIiwibW9kdWxlIiwiY29uc3RhbnQiLCJkaXJlY3RpdmUiLCIkdGltZW91dCIsImZvckVhY2giLCJCYXNlVXJsIiwiQnVuZGxlUGF0aCIsInVybCIsIkludGVybmFscyIsIkNzc0xvYWRlciIsInJlc3RyaWN0IiwicmVxdWlyZSIsImxpbmsiLCJzY29wZSIsImVsZW1lbnQiLCJhdHRycyIsIm5nTW9kZWwiLCJyZWRhY3RvckxvYWRlZCIsInVwZGF0ZU1vZGVsIiwidmFsdWUiLCIkYXBwbHkiLCIkc2V0Vmlld1ZhbHVlIiwib3B0aW9ucyIsImNoYW5nZUNhbGxiYWNrIiwiYWRkaXRpb25hbE9wdGlvbnMiLCJyZWRhY3RvciIsIiRldmFsIiwiZWRpdG9yIiwiZXh0ZW5kIiwiY2FsbCIsIiRyZW5kZXIiLCJvbiIsIm9mZiIsImlzRGVmaW5lZCIsIiR2aWV3VmFsdWUiXSwibWFwcGluZ3MiOiJDQUtBLFNBQVdBLEtBQU1DLFNBQ08sbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUN6Q0QsT0FBTyxDQUFDLFVBQVcsU0FBVSxVQUFXLFlBQWFELFNBRXJEQSxRQUFRRCxLQUFLSSxRQUFTSixLQUFLSyxFQUFHTCxLQUFLTSxTQUp2QyxDQU1HQyxNQUFNLFNBQVVILFFBQVNDLEVBQUdDLFNBQzdCLE1BQU1FLGdCQUFrQixHQUN4QkYsUUFBUUcsT0FBTyxtQkFBb0IsSUFBSUMsU0FBUyxrQkFBbUJGLGlCQUFpQkcsVUFBVSxXQUFZLENBQUMsV0FBWSxTQUFVQyxVQUsvSCxPQUpBUCxFQUFFUSxRQUFRLENBQUNULFFBQVFVLFFBQVUsNENBQTZDVixRQUFRVSxRQUFVLGtEQUFtRFYsUUFBUVUsUUFBVVYsUUFBUVcsV0FBYSwrQ0FBK0MsU0FBVUMsS0FDN09aLFFBQVFhLFVBQVVDLFVBQVVGLFFBR3ZCLENBQ0xHLFNBQVUsSUFDVkMsUUFBUyxVQUNUQyxLQUFNLFNBQVVDLE1BQU9DLFFBQVNDLE1BQU9DLFNBRXJDSCxNQUFNSSxnQkFBaUIsRUFFdkIsTUFBTUMsWUFBYyxTQUFxQkMsT0FFdkNoQixVQUFTLFdBQ1BVLE1BQU1PLFFBQU8sV0FDWEosUUFBUUssY0FBY0YsY0FLdEJHLFFBQVUsQ0FDZEMsZUFBZ0JMLGFBRVpNLGtCQUFvQlQsTUFBTVUsU0FBV1osTUFBTWEsTUFBTVgsTUFBTVUsVUFBWSxHQUN6RSxJQUFJRSxPQUNKOUIsUUFBUStCLE9BQU9OLFFBQVN2QixnQkFBaUJ5QixtQkFFekMsTUFBTUQsZUFBaUJDLGtCQUFrQkQsZ0JBQWtCeEIsZ0JBQWdCd0IsZUFFdkVBLGlCQUNGRCxRQUFRQyxlQUFpQixTQUFVSixPQUNqQ0QsWUFBWVcsS0FBSy9CLEtBQU1xQixPQUN2QkksZUFBZU0sS0FBSy9CLEtBQU1xQixTQU05QmhCLFVBQVMsV0FDUHdCLE9BQVNiLFFBQVFXLFNBQVNILFNBQzFCTixRQUFRYyxVQUNSaEIsUUFBUWlCLEdBQUcsVUFBVSxXQUNuQmpCLFFBQVFrQixJQUFJLFVBQ1psQixRQUFRVyxTQUFTLHNCQUlyQlQsUUFBUWMsUUFBVSxXQUNaakMsUUFBUW9DLFVBQVVOLFNBQ3BCeEIsVUFBUyxXQUNQVyxRQUFRVyxTQUFTLFdBQVlULFFBQVFrQixZQUFjLElBQ25EcEIsUUFBUVcsU0FBUyxzQkFDakJaLE1BQU1JLGdCQUFpQiJ9