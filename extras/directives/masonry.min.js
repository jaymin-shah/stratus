!function(root,factory){"function"==typeof define&&define.amd?define(["stratus","lodash","angular","masonry-native"],factory):factory(root.Stratus,root._,root.angular,root.Masonry)}(this,function(Stratus,_,angular,Masonry){Stratus.Directives.Masonry=function(){return{restrict:"A",link:function($scope,$element,$attrs){const $ctrl=this;$ctrl.uid=_.uniqueId(_.camelToSnake("masonry")+"_"),Stratus.Instances[$ctrl.uid]=$scope,$scope.elementId=$element.elementId||$ctrl.uid,$scope.initialized=!1;let masonryOptions=$attrs.stratusMasonry&&_.isJSON($attrs.stratusMasonry)?JSON.parse($attrs.stratusMasonry):{};masonryOptions.elementSelector=masonryOptions.elementSelector||".grid",masonryOptions.itemSelector=masonryOptions.itemSelector||".grid-item",masonryOptions.columnWidth=masonryOptions.columnWidth||".grid-sizer",masonryOptions.percentPosition=masonryOptions.percentPosition||!0,masonryOptions.horizontalOrder=masonryOptions.horizontalOrder||!0,$ctrl.init=function(){new Masonry(masonryOptions.elementSelector,masonryOptions).layout(),$scope.initialized=!0},setTimeout(function(){$ctrl.init()},1)}}}});