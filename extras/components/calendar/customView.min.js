!function(root,factory){"function"==typeof define&&define.amd?define(["exports","stratus","lodash","@fullcalendar/core","angular-material","moment-range"],factory):factory({},root.Stratus,root._,root.FullCalendar)}(this,(function(exports,Stratus,_,fullcalendarCore){const min=Stratus.Environment.get("production")?".min":"",name="customView";let uid=null;Stratus.Components.CalendarCustomView={bindings:{template:"@"},controller:function($scope,$attrs){uid||(uid=_.uniqueId(_.camelToSnake(name)+"_")),this.uid=uid,Stratus.Instances[this.uid]=$scope,$scope.elementId=this.uid,$scope.template=$attrs.template&&!_.isEmpty($attrs.template)?$attrs.template:"default",Stratus.Internals.CssLoader(`${Stratus.BaseUrl}${Stratus.BundlePath}extras/components/calendar/${name}.${$scope.template}${min}.css`),$scope.events=[],$scope.$applyAsync((function(){$scope.$parent.customViews[uid]=$scope.template})),this.$onInit=function(){},$scope.eventClick=async function(eventData,ev){return $scope.$parent.calendar.publiclyTrigger("eventClick",[{el:ev.target||null,event:eventData,jsEvent:ev,view:$scope.view}]),!1},$scope.destroy=function(){delete $scope.$parent.customViews[uid],"function"==typeof Stratus.Instances[uid].remove&&Stratus.Instances[uid].remove(),$scope.$destroy(),delete Stratus.Instances[uid]}},templateUrl:function($element,$attrs){return`${Stratus.BaseUrl}${Stratus.BundlePath}extras/components/calendar/${name}.${$attrs.template||"default"}${min}.html`}};class CustomView extends fullcalendarCore.View{initialize(){uid=_.uniqueId(_.camelToSnake(name)+"_"),this.$parentScope=this.viewSpec.options.$scope;const calendarCustomViewComponent=this.viewSpec.options.$compile(`<stratus-calendar-custom-view data-template="${this.viewSpec.options.template}"></stratus-calendar-custom-view>`);this.componentEl=calendarCustomViewComponent(this.$parentScope);const that=this,stopWatchingScope=this.$parentScope.$watch("customViews",(function(){Object.prototype.hasOwnProperty.call(that.$parentScope.customViews,uid)&&Object.prototype.hasOwnProperty.call(Stratus.Instances,uid)&&(that.$scope=Stratus.Instances[uid],that.$scope.options=that.viewSpec.options,that.$scope.view=that,that.eventsWaiting&&that.updateEventScope(that.eventsWaiting),stopWatchingScope())}),!0);fullcalendarCore.appendToElement(this.el,this.componentEl)}destroy(){super.destroy(),this.$scope.destroy()}renderEvents(eventStore,eventUiHash){if(this.$scope){const that=this;this.updateEventScope(that.getEventsInRange(eventStore))}else this.eventsWaiting=this.getEventsInRange(eventStore)}updateEventScope(events){const that=this;that.$scope.$applyAsync((function(){that.$scope.events.length=0,that.$scope.events.push(...events)}))}getEventsInRange(eventStore,eventUiBases){const that=this;eventStore=eventStore||this.props.eventStore,eventUiBases=eventUiBases||this.props.eventUiBases;const events=[],sliceEventObjects=fullcalendarCore.sliceEventStore(eventStore,eventUiBases,that.props.dateProfile.activeRange,that.nextDayThreshold);return Object.prototype.hasOwnProperty.call(sliceEventObjects,"fg")&&_.isArray(sliceEventObjects.fg)&&sliceEventObjects.fg.forEach((function(eventRaw){const event=new fullcalendarCore.EventApi(that.$parentScope.calendar,eventRaw.def,eventRaw.instance);event&&!event.descriptionHTML&&Object.prototype.hasOwnProperty.call(event.constructor.prototype,"extendedProps")&&Object.prototype.hasOwnProperty.call(event.extendedProps,"description")&&(event.descriptionHTML=that.viewSpec.options.$sce.trustAsHtml(event.extendedProps.description)),events.push(event)})),events}}exports.CustomView=CustomView,exports.default=fullcalendarCore.createPlugin({defaultView:"custom",views:{custom:{class:CustomView,template:"default",duration:{month:1}},customArticle:{type:"custom",template:"article"},customArticleDay:{type:"customArticle",duration:{day:1}},customArticleWeek:{type:"customArticle",duration:{week:1}},customArticleMonth:{type:"customArticle",duration:{month:1}},customArticleYear:{type:"customArticle",duration:{year:1}}}}),Object.defineProperty(exports,"__esModule",{value:!0})}));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJkZWZpbmUiLCJhbWQiLCJTdHJhdHVzIiwiXyIsIkZ1bGxDYWxlbmRhciIsInRoaXMiLCJleHBvcnRzIiwiZnVsbGNhbGVuZGFyQ29yZSIsIm1pbiIsIkVudmlyb25tZW50IiwiZ2V0IiwibmFtZSIsInVpZCIsIkNvbXBvbmVudHMiLCJDYWxlbmRhckN1c3RvbVZpZXciLCJiaW5kaW5ncyIsInRlbXBsYXRlIiwiY29udHJvbGxlciIsIiRzY29wZSIsIiRhdHRycyIsInVuaXF1ZUlkIiwiY2FtZWxUb1NuYWtlIiwiSW5zdGFuY2VzIiwiZWxlbWVudElkIiwiaXNFbXB0eSIsIkludGVybmFscyIsIkNzc0xvYWRlciIsIkJhc2VVcmwiLCJCdW5kbGVQYXRoIiwiZXZlbnRzIiwiJGFwcGx5QXN5bmMiLCIkcGFyZW50IiwiY3VzdG9tVmlld3MiLCIkb25Jbml0IiwiZXZlbnRDbGljayIsImFzeW5jIiwiZXZlbnREYXRhIiwiZXYiLCJjYWxlbmRhciIsInB1YmxpY2x5VHJpZ2dlciIsImVsIiwidGFyZ2V0IiwiZXZlbnQiLCJqc0V2ZW50IiwidmlldyIsImRlc3Ryb3kiLCJyZW1vdmUiLCIkZGVzdHJveSIsInRlbXBsYXRlVXJsIiwiJGVsZW1lbnQiLCJDdXN0b21WaWV3IiwiVmlldyIsIltvYmplY3QgT2JqZWN0XSIsIiRwYXJlbnRTY29wZSIsInZpZXdTcGVjIiwib3B0aW9ucyIsImNhbGVuZGFyQ3VzdG9tVmlld0NvbXBvbmVudCIsIiRjb21waWxlIiwiY29tcG9uZW50RWwiLCJ0aGF0Iiwic3RvcFdhdGNoaW5nU2NvcGUiLCIkd2F0Y2giLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJldmVudHNXYWl0aW5nIiwidXBkYXRlRXZlbnRTY29wZSIsImFwcGVuZFRvRWxlbWVudCIsInN1cGVyIiwiZXZlbnRTdG9yZSIsImV2ZW50VWlIYXNoIiwiZ2V0RXZlbnRzSW5SYW5nZSIsImxlbmd0aCIsInB1c2giLCJldmVudFVpQmFzZXMiLCJwcm9wcyIsInNsaWNlRXZlbnRPYmplY3RzIiwic2xpY2VFdmVudFN0b3JlIiwiZGF0ZVByb2ZpbGUiLCJhY3RpdmVSYW5nZSIsIm5leHREYXlUaHJlc2hvbGQiLCJpc0FycmF5IiwiZmciLCJmb3JFYWNoIiwiZXZlbnRSYXciLCJFdmVudEFwaSIsImRlZiIsImluc3RhbmNlIiwiZGVzY3JpcHRpb25IVE1MIiwiY29uc3RydWN0b3IiLCJleHRlbmRlZFByb3BzIiwiJHNjZSIsInRydXN0QXNIdG1sIiwiZGVzY3JpcHRpb24iLCJkZWZhdWx0IiwiY3JlYXRlUGx1Z2luIiwiZGVmYXVsdFZpZXciLCJ2aWV3cyIsImN1c3RvbSIsImNsYXNzIiwiZHVyYXRpb24iLCJtb250aCIsImN1c3RvbUFydGljbGUiLCJ0eXBlIiwiY3VzdG9tQXJ0aWNsZURheSIsImRheSIsImN1c3RvbUFydGljbGVXZWVrIiwid2VlayIsImN1c3RvbUFydGljbGVNb250aCIsImN1c3RvbUFydGljbGVZZWFyIiwieWVhciIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiXSwibWFwcGluZ3MiOiJDQUVBLFNBQVdBLEtBQU1DLFNBQ08sbUJBQVhDLFFBQXlCQSxPQUFPQyxJQUN6Q0QsT0FBTyxDQUFDLFVBQVcsVUFBVyxTQUFVLHFCQUFzQixtQkFBb0IsZ0JBQWlCRCxTQUVuR0EsUUFBUSxHQUFJRCxLQUFLSSxRQUFTSixLQUFLSyxFQUFHTCxLQUFLTSxjQUozQyxDQU1HQyxNQUFNLFNBQVVDLFFBQVNKLFFBQVNDLEVBQUdJLGtCQUV0QyxNQUFNQyxJQUFNTixRQUFRTyxZQUFZQyxJQUFJLGNBQWdCLE9BQVMsR0FDdkRDLEtBQU8sYUFHYixJQUFJQyxJQUFNLEtBQ1ZWLFFBQVFXLFdBQVdDLG1CQUFxQixDQUN0Q0MsU0FBVSxDQUNSQyxTQUFVLEtBRVpDLFdBQVksU0FBVUMsT0FBUUMsUUFJdkJQLE1BQ0hBLElBQU1ULEVBQUVpQixTQUFTakIsRUFBRWtCLGFBQWFWLE1BQVEs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